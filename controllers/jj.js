[
    {
      "firstName": "أحمد",
      "lastName": "حسن",
      "email": "ahmed.hassan@example.com",
      "password": "securepass123",
      "profileName": "AhmedDesign",
      "jobTitle": "مصمم جرافيك أول",
      "profilePicture": "./static/ahmed.jpg",
      "bio": "مصمم جرافيك متحمس مع أكثر من 8 سنوات من الخبرة في مجال العلامات التجارية والوسائط الرقمية. أقوم بإنشاء قصص بصرية تأسر وتلهم الجمهور.",
      "skills": ["5f7b1b9d3e7cd11d8c0f8b1a", "5f7b1b9d3e7cd11d8c0f8b1b"],
      "role": "freelancer",
      "location": "القاهرة، مصر",
      "rating": 4.8,
      "projectCompletionRate": 98,
      "onTimeDeliveryRate": 97,
      "averageResponseTime": 2,
      "completedProjects": 156,
      "portfolio": [
        {
          "title": "هوية بصرية لشركة ناشئة في مجال التكنولوجيا",
          "description": "تصميم هوية بصرية كاملة لشركة ناشئة في مجال الذكاء الاصطناعي",
          "link": "https://example.com/portfolio/tech-startup",
          "image": "./static/portfolio/tech-startup.jpg"
        }
      ],
      "languages": [
        { "language": "العربية", "proficiency": "Native" },
        { "language": "الإنجليزية", "proficiency": "Fluent" }
      ],
      "hourlyRate": 45,
      "statistics": {
        "completionRate": 98,
        "onTimeDeliveryRate": 97,
        "averageResponseTime": 2,
        "totalProjects": 156,
        "totalEarnings": 52000
      },
      "isVerified": true,
      "joinDate": "2019-03-15T00:00:00.000Z"
    },
    {
      "firstName": "فاطمة",
      "lastName": "السيد",
      "email": "fatima.alsayed@example.com",
      "password": "strongpass456",
      "profileName": "FatimaWebDev",
      "jobTitle": "مطورة ويب شاملة",
      "profilePicture": "./static/fatima.jpg",
      "bio": "مطورة ويب شاملة متخصصة في تقنيات MERN. أقوم ببناء تطبيقات ويب قوية وقابلة للتوسع مع التركيز على تجربة المستخدم.",
      "skills": ["5f7b1b9d3e7cd11d8c0f8b1c", "5f7b1b9d3e7cd11d8c0f8b1d"],
      "role": "freelancer",
      "location": "دبي، الإمارات العربية المتحدة",
      "rating": 4.9,
      "projectCompletionRate": 100,
      "onTimeDeliveryRate": 99,
      "averageResponseTime": 1,
      "completedProjects": 89,
      "portfolio": [
        {
          "title": "منصة تعليم إلكتروني",
          "description": "تطوير منصة تعليمية تفاعلية باستخدام React و Node.js",
          "link": "https://example.com/portfolio/elearning-platform",
          "image": "./static/portfolio/elearning.jpg"
        }
      ],
      "languages": [
        { "language": "العربية", "proficiency": "Native" },
        { "language": "الإنجليزية", "proficiency": "Fluent" }
      ],
      "hourlyRate": 55,
      "statistics": {
        "completionRate": 100,
        "onTimeDeliveryRate": 99,
        "averageResponseTime": 1,
        "totalProjects": 89,
        "totalEarnings": 78000
      },
      "isVerified": true,
      "joinDate": "2020-01-10T00:00:00.000Z"
    },
    {
      "firstName": "محمد",
      "lastName": "العلي",
      "email": "mohammed.alali@example.com",
      "password": "securepass789",
      "profileName": "MohammedUX",
      "jobTitle": "مصمم واجهات المستخدم",
      "profilePicture": "./static/mohammed.jpg",
      "bio": "مصمم واجهات مستخدم مبدع مع شغف لخلق تجارب رقمية سلسة وجذابة. أسعى دائمًا لتحقيق التوازن بين الجمال والوظائف في كل مشروع.",
      "skills": ["5f7b1b9d3e7cd11d8c0f8b1e", "5f7b1b9d3e7cd11d8c0f8b1f"],
      "role": "freelancer",
      "location": "الرياض، المملكة العربية السعودية",
      "rating": 4.7,
      "projectCompletionRate": 95,
      "onTimeDeliveryRate": 96,
      "averageResponseTime": 3,
      "completedProjects": 72,
      "portfolio": [
        {
          "title": "تصميم تطبيق للهواتف الذكية",
          "description": "واجهة مستخدم مبتكرة لتطبيق الصحة واللياقة البدنية",
          "link": "https://example.com/portfolio/health-app",
          "image": "./static/portfolio/health-app.jpg"
        }
      ],
      "languages": [
        { "language": "العربية", "proficiency": "Native" },
        { "language": "الإنجليزية", "proficiency": "Conversational" }
      ],
      "hourlyRate": 50,
      "statistics": {
        "completionRate": 95,
        "onTimeDeliveryRate": 96,
        "averageResponseTime": 3,
        "totalProjects": 72,
        "totalEarnings": 65000
      },
      "isVerified": true,
      "joinDate": "2020-06-22T00:00:00.000Z"
    },
    {
      "firstName": "ليلى",
      "lastName": "القاسم",
      "email": "layla.alqasim@example.com",
      "password": "strongpass101",
      "profileName": "LaylaContent",
      "jobTitle": "كاتبة محتوى ومترجمة",
      "profilePicture": "./static/layla.jpg",
      "bio": "كاتبة محتوى ومترجمة محترفة متخصصة في التسويق الرقمي والتقنية. أقدم محتوى عالي الجودة يجذب الجمهور ويحسن ظهور العلامات التجارية عبر الإنترنت.",
      "skills": ["5f7b1b9d3e7cd11d8c0f8b20", "5f7b1b9d3e7cd11d8c0f8b21"],
      "role": "freelancer",
      "location": "عمان، الأردن",
      "rating": 4.9,
      "projectCompletionRate": 99,
      "onTimeDeliveryRate": 98,
      "averageResponseTime": 2,
      "completedProjects": 128,
      "portfolio": [
        {
          "title": "حملة تسويقية لشركة تكنولوجيا",
          "description": "إنشاء محتوى لحملة تسويقية شاملة لشركة برمجيات ناشئة",
          "link": "https://example.com/portfolio/tech-marketing",
          "image": "./static/portfolio/tech-marketing.jpg"
        }
      ],
      "languages": [
        { "language": "العربية", "proficiency": "Native" },
        { "language": "الإنجليزية", "proficiency": "Fluent" },
        { "language": "الفرنسية", "proficiency": "Conversational" }
      ],
      "hourlyRate": 40,
      "statistics": {
        "completionRate": 99,
        "onTimeDeliveryRate": 98,
        "averageResponseTime": 2,
        "totalProjects": 128,
        "totalEarnings": 92000
      },
      "isVerified": true,
      "joinDate": "2019-11-05T00:00:00.000Z"
    },
    {
      "firstName": "عمر",
      "lastName": "الشمري",
      "email": "omar.alshammari@example.com",
      "password": "securepass202",
      "profileName": "OmarMobileDev",
      "jobTitle": "مطور تطبيقات الهواتف الذكية",
      "profilePicture": "./static/omar.jpg",
      "bio": "مطور تطبيقات متمرس للأندرويد و iOS مع خبرة في تطوير تطبيقات عالية الأداء وسهلة الاستخدام. متخصص في تقنيات React Native و Flutter.",
      "skills": ["5f7b1b9d3e7cd11d8c0f8b22", "5f7b1b9d3e7cd11d8c0f8b23"],
      "role": "freelancer",
      "location": "جدة، المملكة العربية السعودية",
      "rating": 4.8,
      "projectCompletionRate": 97,
      "onTimeDeliveryRate": 95,
      "averageResponseTime": 4,
      "completedProjects": 63,
      "portfolio": [
        {
          "title": "تطبيق للتجارة الإلكترونية",
          "description": "تطوير تطبيق متكامل للتسوق عبر الهواتف الذكية باستخدام React Native",
          "link": "https://example.com/portfolio/ecommerce-app",
          "image": "./static/portfolio/ecommerce-app.jpg"
        }
      ],
      "languages": [
        { "language": "العربية", "proficiency": "Native" },
        { "language": "الإنجليزية", "proficiency": "Fluent" }
      ],
      "hourlyRate": 60,
      "statistics": {
        "completionRate": 97,
        "onTimeDeliveryRate": 95,
        "averageResponseTime": 4,
        "totalProjects": 63,
        "totalEarnings": 108000
      },
      "isVerified": true,
      "joinDate": "2020-03-18T00:00:00.000Z"
    },
    {
      "firstName": "نور",
      "lastName": "الحسيني",
      "email": "noor.alhusseini@example.com",
      "password": "strongpass303",
      "profileName": "NoorDataScience",
      "jobTitle": "عالمة بيانات",
      "profilePicture": "./static/noor.jpg",
      "bio": "عالمة بيانات ذات خبرة في تحليل البيانات الضخمة وتطوير نماذج التعلم الآلي. أساعد الشركات في اتخاذ قرارات مدروسة بناءً على البيانات.",
      "skills": ["5f7b1b9d3e7cd11d8c0f8b24", "5f7b1b9d3e7cd11d8c0f8b25"],
      "role": "freelancer",
      "location": "بيروت، لبنان",
      "rating": 4.9,
      "projectCompletionRate": 100,
      "onTimeDeliveryRate": 98,
      "averageResponseTime": 3,
      "completedProjects": 42,
      "portfolio": [
        {
          "title": "نموذج تنبؤي لشركة مالية",
          "description": "تطوير نموذج تعلم آلي للتنبؤ بسلوك العملاء في القطاع المالي",
          "link": "https://example.com/portfolio/predictive-model",
          "image": "./static/portfolio/predictive-model.jpg"
        }
      ],
      "languages": [
        { "language": "العربية", "proficiency": "Native" },
        { "language": "الإنجليزية", "proficiency": "Fluent" },
        { "language": "الفرنسية", "proficiency": "Basic" }
      ],
      "hourlyRate": 70,
      "statistics": {
        "completionRate": 100,
        "onTimeDeliveryRate": 98,
        "averageResponseTime": 3,
        "totalProjects": 42,
        "totalEarnings": 126000
      },
      "isVerified": true,
      "joinDate": "2021-01-07T00:00:00.000Z"
    },
    {
      "firstName": "يوسف",
      "lastName": "المنصور",
      "email": "yousef.almansour@example.com",
      "password": "securepass404",
      "profileName": "YousefSEO",
      "jobTitle": "خبير تحسين محركات البحث",
      "profilePicture": "./static/yousef.jpg",
      "bio": "خبير في تحسين محركات البحث (SEO) مع سجل حافل في تحسين ظهور المواقع في نتائج البحث. أساعد الشركات في زيادة حركة المرور العضوية وتحسين معدلات التحويل.",
      "skills": ["5f7b1b9d3e7cd11d8c0f8b26", "5f7b1b9d3e7cd11d8c0f8b27"],
      "role": "freelancer",
      "location": "الكويت، الكويت",
      "rating": 4.7,
      "projectCompletionRate": 96,
      "onTimeDeliveryRate": 94,
      "averageResponseTime": 5,
      "completedProjects": 85,
      "portfolio": [
        {
          "title": "تحسين SEO لموقع تجارة إلكترونية",
          
                  "description": "تحسين ظهور موقع تجارة إلكترونية في محركات البحث وزيادة حركة المرور العضوية بنسبة 150%",
        "link": "https://example.com/portfolio/ecommerce-seo",
        "image": "./static/portfolio/ecommerce-seo.jpg"
      }
    ],
    "languages": [
      { "language": "العربية", "proficiency": "Native" },
      { "language": "الإنجليزية", "proficiency": "Fluent" }
    ],
    "hourlyRate": 55,
    "statistics": {
      "completionRate": 96,
      "onTimeDeliveryRate": 94,
      "averageResponseTime": 5,
      "totalProjects": 85,
      "totalEarnings": 112000
    },
    "isVerified": true,
    "joinDate": "2020-09-30T00:00:00.000Z"
  },
  {
    "firstName": "رنا",
    "lastName": "الخطيب",
    "email": "rana.alkhatib@example.com",
    "password": "strongpass505",
    "profileName": "RanaAnimation",
    "jobTitle": "مصممة رسوم متحركة",
    "profilePicture": "./static/rana.jpg",
    "bio": "مصممة رسوم متحركة مبدعة متخصصة في إنشاء رسوم متحركة ثنائية وثلاثية الأبعاد للأفلام والإعلانات والألعاب. أحب إضفاء الحياة على الشخصيات والقصص.",
    "skills": ["5f7b1b9d3e7cd11d8c0f8b28", "5f7b1b9d3e7cd11d8c0f8b29"],
    "role": "freelancer",
    "location": "تونس، تونس",
    "rating": 4.8,
    "projectCompletionRate": 98,
    "onTimeDeliveryRate": 97,
    "averageResponseTime": 3,
    "completedProjects": 56,
    "portfolio": [
      {
        "title": "فيديو ترويجي متحرك",
        "description": "إنتاج فيديو رسوم متحركة قصير لحملة إعلانية لشركة تكنولوجيا",
        "link": "https://example.com/portfolio/promo-animation",
        "image": "./static/portfolio/promo-animation.jpg"
      }
    ],
    "languages": [
      { "language": "العربية", "proficiency": "Native" },
      { "language": "الإنجليزية", "proficiency": "Fluent" },
      { "language": "الفرنسية", "proficiency": "Conversational" }
    ],
    "hourlyRate": 65,
    "statistics": {
      "completionRate": 98,
      "onTimeDeliveryRate": 97,
      "averageResponseTime": 3,
      "totalProjects": 56,
      "totalEarnings": 98000
    },
    "isVerified": true,
    "joinDate": "2020-11-15T00:00:00.000Z"
  },
  {
    "firstName": "كريم",
    "lastName": "الفهد",
    "email": "kareem.alfahd@example.com",
    "password": "securepass606",
    "profileName": "KareemCyberSec",
    "jobTitle": "خبير أمن سيبراني",
    "profilePicture": "./static/kareem.jpg",
    "bio": "خبير في الأمن السيبراني مع تركيز على حماية البنية التحتية الحيوية والشبكات المؤسسية. أعمل على تعزيز الأمن الرقمي للشركات وحماية بياناتها من التهديدات المتطورة.",
    "skills": ["5f7b1b9d3e7cd11d8c0f8b30", "5f7b1b9d3e7cd11d8c0f8b31"],
    "role": "freelancer",
    "location": "أبو ظبي، الإمارات العربية المتحدة",
    "rating": 4.9,
    "projectCompletionRate": 99,
    "onTimeDeliveryRate": 98,
    "averageResponseTime": 2,
    "completedProjects": 78,
    "portfolio": [
      {
        "title": "تقييم أمني لشركة مالية",
        "description": "إجراء تقييم شامل للأمن السيبراني وتنفيذ استراتيجية أمنية متكاملة لمؤسسة مالية كبرى",
        "link": "https://example.com/portfolio/financial-security",
        "image": "./static/portfolio/financial-security.jpg"
      }
    ],
    "languages": [
      { "language": "العربية", "proficiency": "Native" },
      { "language": "الإنجليزية", "proficiency": "Fluent" }
    ],
    "hourlyRate": 80,
    "statistics": {
      "completionRate": 99,
      "onTimeDeliveryRate": 98,
      "averageResponseTime": 2,
      "totalProjects": 78,
      "totalEarnings": 187000
    },
    "isVerified": true,
    "joinDate": "2019-08-22T00:00:00.000Z"
  },
  {
    "firstName": "سارة",
    "lastName": "العمري",
    "email": "sara.alomari@example.com",
    "password": "strongpass707",
    "profileName": "SaraProductManager",
    "jobTitle": "مديرة منتجات",
    "profilePicture": "./static/sara.jpg",
    "bio": "مديرة منتجات ذات خبرة في قيادة فرق متعددة التخصصات لتطوير منتجات رقمية مبتكرة. أركز على تحقيق التوازن بين احتياجات المستخدمين وأهداف الأعمال لخلق منتجات ناجحة.",
    "skills": ["5f7b1b9d3e7cd11d8c0f8b32", "5f7b1b9d3e7cd11d8c0f8b33"],
    "role": "freelancer",
    "location": "عمان، الأردن",
    "rating": 4.8,
    "projectCompletionRate": 97,
    "onTimeDeliveryRate": 96,
    "averageResponseTime": 4,
    "completedProjects": 45,
    "portfolio": [
      {
        "title": "إطلاق تطبيق للخدمات المنزلية",
        "description": "قيادة تطوير وإطلاق تطبيق ناجح للخدمات المنزلية عبر الهواتف الذكية",
        "link": "https://example.com/portfolio/home-services-app",
        "image": "./static/portfolio/home-services-app.jpg"
      }
    ],
    "languages": [
      { "language": "العربية", "proficiency": "Native" },
      { "language": "الإنجليزية", "proficiency": "Fluent" }
    ],
    "hourlyRate": 75,
    "statistics": {
      "completionRate": 97,
      "onTimeDeliveryRate": 96,
      "averageResponseTime": 4,
      "totalProjects": 45,
      "totalEarnings": 135000
    },
    "isVerified": true,
    "joinDate": "2020-05-03T00:00:00.000Z"
  }
]






[
    {
      "project": "507f1f77bcf86cd799439011",
      "freelancer": "507f1f77bcf86cd799439022",
      "amount": 5000,
      "deliveryTime": 30,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح إنشاء حدائق عمودية في المدن الكبرى لتحسين جودة الهواء. سأقوم بتصميم نظام ري ذكي وتطبيق لإدارة النباتات.",
      "status": "pending"
    },
    {
      "project": "507f1f77bcf86cd799439033",
      "freelancer": "507f1f77bcf86cd799439044",
      "amount": 3500,
      "deliveryTime": 45,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح تطوير برنامج تدريبي لتعليم كبار السن مهارات التكنولوجيا الحديثة. سأصمم منصة تعليمية سهلة الاستخدام مع دروس تفاعلية.",
      "status": "accepted"
    },
    {
      "project": "507f1f77bcf86cd799439055",
      "freelancer": "507f1f77bcf86cd799439066",
      "amount": 8000,
      "deliveryTime": 60,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح تطوير تطبيق للهواتف الذكية لتتبع استهلاك المياه المنزلية. سيتضمن التطبيق إحصائيات مفصلة ونصائح لتوفير المياه.",
      "status": "pending"
    },
    {
      "project": "507f1f77bcf86cd799439077",
      "freelancer": "507f1f77bcf86cd799439088",
      "amount": 12000,
      "deliveryTime": 90,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح إنشاء مركز ثقافي متنقل لخدمة المناطق الريفية. سأطور نظام إدارة للفعاليات وتطبيق للهواتف الذكية للتواصل مع المجتمع.",
      "status": "rejected"
    },
    {
      "project": "507f1f77bcf86cd799439099",
      "freelancer": "507f1f77bcf86cd799439100",
      "amount": 6500,
      "deliveryTime": 45,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح إطلاق مبادرة لإعادة تدوير النفايات الإلكترونية وتحويلها إلى أعمال فنية. سأصمم منصة لربط الفنانين بمصادر النفايات الإلكترونية.",
      "status": "pending"
    },
    {
      "project": "507f1f77bcf86cd799439111",
      "freelancer": "507f1f77bcf86cd799439122",
      "amount": 15000,
      "deliveryTime": 120,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح تنظيم مهرجان سنوي للطعام التقليدي من مختلف المناطق العربية. سأطور موقعًا إلكترونيًا وتطبيقًا للهواتف الذكية لإدارة الفعالية.",
      "status": "accepted"
    },
    {
      "project": "507f1f77bcf86cd799439133",
      "freelancer": "507f1f77bcf86cd799439144",
      "amount": 4000,
      "deliveryTime": 30,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح إطلاق حملة توعية حول أهمية الصحة النفسية في المدارس والجامعات. سأطور منصة تعليمية تفاعلية ومنتدى للنقاش.",
      "status": "pending"
    },
    {
      "project": "507f1f77bcf86cd799439155",
      "freelancer": "507f1f77bcf86cd799439166",
      "amount": 20000,
      "deliveryTime": 180,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح تصميم نظام ذكي لإدارة حركة المرور في المدن المزدحمة. سأطور خوارزميات متقدمة للتحكم في إشارات المرور وتطبيق للسائقين.",
      "status": "pending"
    },
    {
      "project": "507f1f77bcf86cd799439177",
      "freelancer": "507f1f77bcf86cd799439188",
      "amount": 7500,
      "deliveryTime": 60,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح إنشاء منصة إلكترونية لربط المزارعين المحليين بالمستهلكين مباشرة. سأطور موقعًا وتطبيقًا للهواتف الذكية مع نظام دفع آمن.",
      "status": "accepted"
    },
    {
      "project": "507f1f77bcf86cd799439199",
      "freelancer": "507f1f77bcf86cd799439200",
      "amount": 10000,
      "deliveryTime": 90,
      "proposal": "السلام عليكم، أنا مطور برمجة محترف وأستطيع العمل بإنجاز وسهولة. أقترح تطوير برنامج لتدريب الشباب على ريادة الأعمال الاجتماعية. سأصمم منصة تعلم إلكترونية مع أدوات لتخطيط المشاريع وإدارتها.",
      "status": "pending"
    }
  ]




        // Ensure projectId is a string
        // Ensure projectId is a string
        import { useState, useEffect } from 'react';
        import { useParams } from 'next/navigation';
        // ... other imports ...
        
        export default function ProjectDetails() {
          const [project, setProject] = useState(null);
          const [loading, setLoading] = useState(true);
          const [error, setError] = useState(null);
          const { projectId } = useParams();
          
          const [proposals, setProposals] = useState([]);
          useEffect(() => {
            const fetchProjectAndProposals = async () => {
              try {
                // Ensure projectId is a string
                const id = projectId.toString();
                
                const [projectResponse, proposalsResponse] = await Promise.all([
                  fetch(`http://localhost:3344/projects/${id}`),
                  fetch(`http://localhost:3344/proposals/project/${id}`)
                ]);
        
                if (!projectResponse.ok) {
                  throw new Error('Failed to fetch project data');
                }
        
                const projectData = await projectResponse.json();
                setProject(projectData);
        
                if (proposalsResponse.ok) {
                  const proposalsData = await proposalsResponse.json();
                  setProposals(proposalsData);
                } else {
                  console.log('No proposals found or error fetching proposals');
                  setProposals([]);
                }
        
                setLoading(false);
              } catch (err) {
                setError(err.message);
                setLoading(false);
              }
            };
        
            fetchProjectAndProposals();
          }, [projectId]);
        
          // ... rest of the component code ...
        
          // Update the proposals rendering section
          <div className="card mb-4">
            <div className="card-body">
              <h5 className="card-title mb-4">العروض المقدمة</h5>
              {proposals.length > 0 ? (
                <div className="accordion" id="proposalsAccordion">
                  {proposals.map((proposal, index) => (
                    // ... existing proposal rendering code ...
                  ))}
                </div>
              ) : (
                <p>لا يوجد عروض بعد.</p>
              )}
            </div>
          </div>
        
          // ... rest of the component code ...
        }



        const express = require('express');
const multer = require('multer');
const { updateUser } = require('../controllers/userController');
const auth = require('../middleware/auth');

const router = express.Router();

const storage = multer.diskStorage({
  destination: function (req, file, cb) {
    cb(null, 'uploads/') // Make sure this directory exists
  },
  filename: function (req, file, cb) {
    cb(null, Date.now() + '-' + file.originalname)
  }
});

const upload = multer({ storage: storage });

router.patch('/:id', auth, upload.single('profilePicture'), updateUser);

module.exports = router;


exports.updateUser = async (req, res) => {
  try {
    const updates = req.body;
    if (req.file) {
      updates.profilePicture = req.file.path;
    }
    if (updates.skills) {
      updates.skills = JSON.parse(updates.skills);
    }
    const user = await User.findByIdAndUpdate(req.params.id, updates, { new: true });
    if (!user) {
      return res.status(404).send();
    }
    res.send(user);
  } catch (error) {
    res.status(400).send(error);
  }
};